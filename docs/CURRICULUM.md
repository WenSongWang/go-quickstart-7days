# 7 天课程规划与深度说明

本文档说明：本系列**两大目录**、**完整技术栈**（含新增第三方）、**7 天练完与「中级」的关系**、以及**可加的高频技术点/面试点**，便于按「上线项目实战 + 中级后端」目标排课与扩展。

---

## 一、两大目录结构

| 部分 | 目录 | 内容 |
| :--- | :--- | :--- |
| **第一大部分** | 根目录 `day0`～`day7` | **7 天入门到中级** + **方案 A**：事务（Day 4）、统一错误码/响应体（Day 7）、JWT（Day 7 或附录）、validator（Day 7 与 gin）、Swagger（Day 7 或附录）。学完即覆盖中级面试常考的知识面。 |
| **第二大部分** | `part2-projects/` | **方案 B**：7 天后的**项目实战巩固**。用 1～2 个小项目接 Redis、JWT、事务、pprof、限流等，在项目里用熟。见 [part2-projects/README.md](../part2-projects/README.md)。 |

- 第一大部分 = 当前仓库根目录下的 day0～day7，**方案 A 已囊括在内**（在对应天的代码与博文中加入事务、统一错误码、JWT、validator 等）。
- 第二大部分 = 单独目录 `part2-projects/`，项目列表与说明见该目录 README。

---

## 二、本系列完整技术栈（已规划，对应第一大部分）

### 按天划分

| 天数 | 主题 | 标准库 / 已有 | 新增第三方（已加入规划） |
| :--- | :--- | :--- | :--- |
| Day 1 | Go 基础 | fmt、errors、sync、context、time | — |
| Day 2 | HTTP 服务 | net/http、encoding/json | — |
| Day 3 | 项目与配置 | os、cmd/internal 目录 | **godotenv**（已有）、**viper**（配置多源、类型解析，贴近生产） |
| Day 4 | 数据层 | database/sql、驱动 | **lib/pq**、**modernc.org/sqlite**（纯 Go，已有）、**sqlx**（Get/Select 到结构体、NamedExec，减少 Scan 样板） |
| Day 5 | 中间件与分层 | http.Handler、包装、鉴权 | 标准库中间件；Day 7 用 gin 时再展示 gin 中间件风格 |
| Day 6 | 测试与部署 | testing、httptest、Dockerfile | **testify**（assert/require，表驱动断言更清晰） |
| Day 7 | 综合实战 | slog、优雅关闭、Shutdown | **gin**（路由+中间件+优雅关闭）；可选 **validator**（请求体验证，与 gin 常一起用） |

### 第三方依赖汇总（go.mod 将包含）

| 包 | 用途 | 出现天数 |
| :--- | :--- | :--- |
| github.com/joho/godotenv | .env 加载 | Day 3 |
| github.com/spf13/viper | 配置（env/文件/默认值） | Day 3 |
| github.com/lib/pq | PostgreSQL 驱动 | Day 4 |
| modernc.org/sqlite | SQLite 驱动（纯 Go，无 CGo） | Day 4 |
| github.com/jmoiron/sqlx | database/sql 扩展，结构体映射 | Day 4 |
| github.com/stretchr/testify | 测试 assert/require | Day 6 |
| github.com/gin-gonic/gin | HTTP 框架（路由、中间件） | Day 7 |
| github.com/go-playground/validator（可选） | 请求体校验 | Day 7（与 gin 搭配） |

---

## 三、7 天练完能否胜任「中级 Go 后端」？

### 现在的 7 天算「初级」吗？

**不算「只有初级」**。本系列 7 天（含 viper、sqlx、testify、gin 等）的深度已经超出典型「初级」：

| 常见「初级」范围 | 本系列 7 天实际覆盖 |
| :--- | :--- |
| 能写简单 CRUD、能跑起来 | 配置、中间件、分层、测试、部署、**gin 综合实战**、优雅关闭、接口抽象 |
| 只会标准库或简单框架 | 标准库 → 自建 mux/中间件 → **gin**，有对比、有上线向写法 |
| 面试能答语法和 error | error、并发、context、优雅关闭、分层、鉴权等**中级常考点**都有代码可讲 |

更准确的说法：**本 7 天 = 入门到中级的「桥梁 / 基础」**，不是「再来一个 7 天才能摸到中级」，而是「这 7 天已经摸到中级的知识面，缺的是在项目里用熟、踩坑、加深」。

### 是否需要「另外一个 7 天」才能巩固中级？

**不必然需要再开一门「7 天进阶课」**。可以三选一或组合：

| 方式 | 说明 |
| :--- | :--- |
| **在本 7 天内加料（方案 A）** | 第一大部分已囊括：事务（Day 4）、统一错误码/JWT/validator（Day 7）等，7 天结束时就具备中级面试常问的知识点。 |
| **7 天打底 + 自己做小项目** | 用本 7 天打底，再做 1～2 个小项目（接 Redis、做 JWT、写事务、上 pprof），在项目里巩固，自然到中级。 |
| **再做「7 天进阶篇」** | 若你喜欢「再来 7 天」的节奏，可以单独开进阶（Redis、gRPC、限流、可观测、分布式锁等），但这是**可选**，不是「不学第二个 7 天就永远初级」。 |

### 小结（可直接回答「所以还需要另外一个 7 天吗？」）

| 问题 | 回答 |
| :--- | :--- |
| **能直接胜任吗？** | **不能保证**。中级 = 基础扎实 + 真实项目经验 + 能独立设计/排错。7 天能把**入门到中级的核心基础 + 常用技术栈**过一遍，达到「能写、能讲、能扩展」。 |
| **覆盖到什么程度？** | 语言基础、HTTP/中间件、配置、数据库、测试、部署、**gin 综合实战**都练到；面试常问的 error、并发、context、优雅关闭、分层、接口抽象都有对应代码。 |
| **还差什么？** | 真实业务经验、分布式/高并发场景、缓存(Redis)、RPC、消息队列、可观测等，多数可在**第二大部分（part2-projects）**里练；第一大部分已含方案 A。 |

**结论**：本 7 天 ≠ 只有初级，而是**入门到中级的桥梁**；要巩固中级，**不必**非得「再来一个 7 天」，可以在本 7 天里加事务/JWT/统一错误码等，或 7 天后用 1～2 个小项目练手。若你愿意做「7 天进阶篇」也可以，那是锦上添花，不是硬性前提。

---

## 四、可加的高频技术点与面试点（方案 A 已纳入第一大部分）

**方案 A** 的项已规划进**第一大部分**的对应天（见上表）；以下表格同时适用于「第一大部分内尚未加上的部分」和「第二大部分项目」的选型参考。

以下多为**中级面试常问、上线项目常见**，可按需加入某一天或作为「扩展/附录」。

### 建议加入 7 天内（优先）

| 技术点 | 面试/上线频率 | 建议位置 | 说明 |
| :--- | :--- | :--- | :--- |
| **事务（Transaction）** | 高 | Day 4 数据层 | 多步写操作保证一致性，`db.Begin` / `Commit` / `Rollback`，面试常问。 |
| **统一错误码 / 统一响应体** | 高 | Day 7 或 Day 5 | `{ code, message, data }`，前后端约定、错误码表；面试「你们错误怎么设计？」 |
| **JWT 鉴权** | 高 | Day 7 或附录 | 无状态鉴权、Refresh Token；与现有 API Key 并列或替代。 |
| **请求体校验（validator）** | 高 | Day 7（与 gin 一起） | 已列入可选；`binding:"required"` 等，减少手写 if。 |
| **接口文档 Swagger** | 中高 | Day 7 或附录 | swaggo 等，生成 API 文档，上线前后端联调常用。 |

### 建议作为扩展 / 附录（后续补）

| 技术点 | 面试/上线频率 | 说明 |
| :--- | :--- | :--- |
| **Redis 缓存** | 高 | 连接、Get/Set、缓存穿透/击穿/雪崩概念；分布式锁（SET NX）。 |
| **限流** | 高 | 令牌桶、漏桶；gin 限流中间件或自写。 |
| **熔断** | 中 | 调用下游失败过多时熔断，避免雪崩。 |
| **gRPC / RPC** | 高 | 与 HTTP 对比、简单 client/server；微服务间调用。 |
| **单元测试 mock** | 高 | 用接口 + 假实现或 testify/mock 测 handler 不依赖真实 DB。 |
| **pprof / 性能分析** | 中高 | 找 CPU/内存热点；benchmark；面试「如何排查性能问题？」 |
| **可观测** | 中高 | Prometheus metrics、OpenTelemetry tracing；日志已用 slog。 |
| **配置中心 / 多环境** | 中 | 开发/测试/生产环境区分；viper 已覆盖本地与 env。 |

### 若时间有限：最小「加分项」清单

在不动 7 天主线的提前下，优先加这几项**对面试和上线最加分**：

1. **Day 4**：加一节「事务示例」或一个小 demo（转账/扣库存）。  
2. **Day 7**：统一响应体 + 错误码（至少一个示例）；gin + validator 校验一个 POST 体。  
3. **附录**：JWT 鉴权示例（与 gin 结合）；或 Redis 缓存一个 GET 接口。  
4. **INTERVIEW_TOPICS.md**：把「事务、JWT、限流、Redis、pprof」等标成「建议扩展」，并写上对应可讲的话术。

---

## 五、与现有文档的关系

- **根目录 README**：已说明两大目录（第一大部分 = day0～day7 + 方案 A，第二大部分 = part2-projects）。  
- **Day 0 README**：路线表里体现 viper、sqlx、testify、gin（及可选 validator），与本节一致。  
- **docs/INTERVIEW_TOPICS.md**：按主题列覆盖情况与「可加的高频技术点」。  
- **part2-projects/README.md**：第二大部分项目列表与使用说明。  
- 实际写 Day 3～7 代码/博文时，按本 CURRICULUM 的「已规划」列加入对应依赖与方案 A 内容；写 part2 项目时按方案 B 选技术点即可。

**总结**：**第一大部分** = 7 天 + 方案 A（事务、统一错误码、JWT、validator 等）全部纳入；**第二大部分** = part2-projects 方案 B 项目巩固。viper、sqlx、testify、gin 等已规划进第一大部分。
